<ol class="toc">
  <li class="toc-item toc-level-1">
    <a href="#%E4%BF%A1%E6%81%AF" class="toc-link"><span class="toc-number">.</span><span class="toc-text">信息</span></a>
    <ol class="toc-child">
      <li class="toc-item toc-level-2"><a href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">无</span><span
            class="toc-text">定义</span></a></li>
      <li class="toc-item toc-level-2"><a href="#%E4%BF%A1%E6%81%AF%E7%9A%84-11-%E4%B8%AA%E7%89%B9%E5%BE%81"><span
            class="toc-number">无</span><span class="toc-text">信息的 11 个特征</span></a></li>
      <li class="toc-item toc-level-2"><a
          href="#%E4%BF%A1%E6%81%AF%E7%9A%84-7-%E4%B8%AA%E8%B4%A8%E9%87%8F%E5%B1%9E%E6%80%A7"><span
            class="toc-number">无</span><span class="toc-text">信息的 7 个质量属性</span></a></li>
      <li class="toc-item toc-level-2"><a href="#%E4%BF%A1%E6%81%AF%E7%9A%84%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%9E%8B"><span
            class="toc-number">无</span><span class="toc-text">信息的传输模型</span></a></li>
    </ol>
  </li>
  <li class="toc-item toc-level-1">
    <a href="#%E4%BF%A1%E6%81%AF%E5%8C%96" class="toc-link"><span class="toc-number">.</span><span
        class="toc-text">信息化</span></a>
  </li>
  <li class="toc-item toc-level-1">
    <a href="#%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F" class="toc-link"><span class="toc-number">.</span><span
        class="toc-text">信息系统</span></a>
  </li>
  <li class="toc-item toc-level-1">
    <a href="#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8" class="toc-link"><span
        class="toc-number">.</span><span class="toc-text">信息技术应用</span></a>
    <ol class="toc-child">
      <li class="toc-item toc-level-2">
        <a href="#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8-a" class="toc-link"><span
            class="toc-number">.</span><span class="toc-text">信息技术应用 A</span></a>
        <ol class="toc-child">
          <li class="toc-item toc-level-3">
            <a href="#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8-ab" class="toc-link"><span
                class="toc-number">.</span><span class="toc-text">信息技术应用 AB</span></a>
            <ol class="toc-child">
              <li class="toc-item toc-level-4"><a
                  href="#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8-abc"><span
                    class="toc-number">无</span><span class="toc-text">信息技术应用 ABC</span></a></li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<script>
  const arr = [{
    type: 'element',
    tagName: 'ul',
    properties: {},
    children: [{
        type: 'text',
        value: '\n'
      },
      {
        type: 'element',
        tagName: 'li',
        properties: {},
        children: [{
            type: 'text',
            value: '\n'
          },
          {
            type: 'element',
            tagName: 'p',
            properties: {},
            children: [{
              type: 'element',
              tagName: 'a',
              properties: {
                href: '#%E4%BF%A1%E6%81%AF'
              },
              children: [{
                type: 'text',
                value: '信息'
              }]
            }]
          },
          {
            type: 'text',
            value: '\n'
          },
          {
            type: 'element',
            tagName: 'ul',
            properties: {},
            children: [{
                type: 'text',
                value: '\n'
              },
              {
                type: 'element',
                tagName: 'li',
                properties: {},
                children: [{
                  type: 'element',
                  tagName: 'a',
                  properties: {
                    href: '#%E5%AE%9A%E4%B9%89'
                  },
                  children: [{
                    type: 'text',
                    value: '定义'
                  }]
                }]
              },
              {
                type: 'text',
                value: '\n'
              },
              {
                type: 'element',
                tagName: 'li',
                properties: {},
                children: [{
                  type: 'element',
                  tagName: 'a',
                  properties: {
                    href: '#%E4%BF%A1%E6%81%AF%E7%9A%84-11-%E4%B8%AA%E7%89%B9%E5%BE%81'
                  },
                  children: [{
                    type: 'text',
                    value: '信息的 11 个特征'
                  }]
                }]
              },
              {
                type: 'text',
                value: '\n'
              },
              {
                type: 'element',
                tagName: 'li',
                properties: {},
                children: [{
                  type: 'element',
                  tagName: 'a',
                  properties: {
                    href: '#%E4%BF%A1%E6%81%AF%E7%9A%84-7-%E4%B8%AA%E8%B4%A8%E9%87%8F%E5%B1%9E%E6%80%A7'
                  },
                  children: [{
                    type: 'text',
                    value: '信息的 7  个质量属性'
                  }]
                }]
              },
              {
                type: 'text',
                value: '\n'
              },
              {
                type: 'element',
                tagName: 'li',
                properties: {},
                children: [{
                  type: 'element',
                  tagName: 'a',
                  properties: {
                    href: '#%E4%BF%A1%E6%81%AF%E7%9A%84%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%9E%8B'
                  },
                  children: [{
                    type: 'text',
                    value: '信息的传输模型'
                  }]
                }]
              },
              {
                type: 'text',
                value: '\n'
              }
            ]
          },
          {
            type: 'text',
            value: '\n'
          }
        ]
      },
      {
        type: 'text',
        value: '\n'
      },
      {
        type: 'element',
        tagName: 'li',
        properties: {},
        children: [{
            type: 'text',
            value: '\n'
          },
          {
            type: 'element',
            tagName: 'p',
            properties: {},
            children: [{
              type: 'element',
              tagName: 'a',
              properties: {
                href: '#%E4%BF%A1%E6%81%AF%E5%8C%96'
              },
              children: [{
                type: 'text',
                value: '信息化'
              }]
            }]
          },
          {
            type: 'text',
            value: '\n'
          }
        ]
      },
      {
        type: 'text',
        value: '\n'
      },
      {
        type: 'element',
        tagName: 'li',
        properties: {},
        children: [{
            type: 'text',
            value: '\n'
          },
          {
            type: 'element',
            tagName: 'p',
            properties: {},
            children: [{
              type: 'element',
              tagName: 'a',
              properties: {
                href: '#%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F'
              },
              children: [{
                type: 'text',
                value: '信息系统'
              }]
            }]
          },
          {
            type: 'text',
            value: '\n'
          }
        ]
      },
      {
        type: 'text',
        value: '\n'
      },
      {
        type: 'element',
        tagName: 'li',
        properties: {},
        children: [{
            type: 'text',
            value: '\n'
          },
          {
            type: 'element',
            tagName: 'p',
            properties: {},
            children: [{
              type: 'element',
              tagName: 'a',
              properties: {
                href: '#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8'
              },
              children: [{
                type: 'text',
                value: '信息技术应用'
              }]
            }]
          },
          {
            type: 'text',
            value: '\n'
          },
          {
            type: 'element',
            tagName: 'ul',
            properties: {},
            children: [{
                type: 'text',
                value: '\n'
              },
              {
                type: 'element',
                tagName: 'li',
                properties: {},
                children: [{
                    type: 'text',
                    value: '\n'
                  },
                  {
                    type: 'element',
                    tagName: 'p',
                    properties: {},
                    children: [{
                      type: 'element',
                      tagName: 'a',
                      properties: {
                        href: '#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8-a'
                      },
                      children: [{
                        type: 'text',
                        value: '信息技术应用 A'
                      }]
                    }]
                  },
                  {
                    type: 'text',
                    value: '\n'
                  },
                  {
                    type: 'element',
                    tagName: 'ul',
                    properties: {},
                    children: [{
                        type: 'text',
                        value: '\n'
                      },
                      {
                        type: 'element',
                        tagName: 'li',
                        properties: {},
                        children: [{
                            type: 'text',
                            value: '\n'
                          },
                          {
                            type: 'element',
                            tagName: 'p',
                            properties: {},
                            children: [{
                              type: 'element',
                              tagName: 'a',
                              properties: {
                                href: '#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8-ab'
                              },
                              children: [{
                                type: 'text',
                                value: '信息技术应用 AB'
                              }]
                            }]
                          },
                          {
                            type: 'text',
                            value: '\n'
                          },
                          {
                            type: 'element',
                            tagName: 'ul',
                            properties: {},
                            children: [{
                                type: 'text',
                                value: '\n'
                              },
                              {
                                type: 'element',
                                tagName: 'li',
                                properties: {},
                                children: [{
                                  type: 'element',
                                  tagName: 'a',
                                  properties: {
                                    href: '#%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%BA%94%E7%94%A8-abc'
                                  },
                                  children: [{
                                    type: 'text',
                                    value: '信息技术应用 ABC'
                                  }]
                                }]
                              },
                              {
                                type: 'text',
                                value: '\n'
                              }
                            ]
                          },
                          {
                            type: 'text',
                            value: '\n'
                          }
                        ]
                      },
                      {
                        type: 'text',
                        value: '\n'
                      }
                    ]
                  },
                  {
                    type: 'text',
                    value: '\n'
                  }
                ]
              },
              {
                type: 'text',
                value: '\n'
              }
            ]
          },
          {
            type: 'text',
            value: '\n'
          }
        ]
      },
      {
        type: 'text',
        value: '\n'
      }
    ]
  }]

  function juhe(arr) {
    function deep(arr, child = false, leave = 0, idx = 0) {
      console.log(arr, '父');
      for (let [index, item] of arr.entries()) {
        console.log();
        if (item.tagName === 'ul') {
          leave++
          item.tagName = 'ol'
          item.properties.class = child ? 'toc-child' : 'toc'
        }


        if (item.tagName === 'p') {
          item.properties.href = item.children[0].tagName === 'a' && item.children.length === 1 ? item.children[0]
            .properties.href : ''
          item.properties.class = 'toc-link'
          item.tagName = 'a'
          item.children = [{
              type: 'element',
              tagName: 'span',
              properties: {
                class: 'toc-number'
              },
              children: [{
                type: 'text',
                value: idx + '.'
              }]
            },
            {
              type: 'element',
              tagName: 'span',
              properties: {
                class: 'toc-text'
              },
              children: [{
                type: 'text',
                value: item.children[0].children[0].value
              }]
            }
          ]
        }
        if (item.tagName === 'li') {
          item.properties.class = `toc-item toc-level-${leave}`
          // if (item.children.filter((element) => (element.type === 'text' && element.value !== '\n') || (element.type ===
          //     'element' && element.tagName !== 'a' && element.tagName !== 'p')).length === 1) {
          // } else {
          //   // item.properties.class = `toc-item`
          // }
          if (item.children.length === 1 && item.children[0].tagName === 'a') {
            const value = item.children[0].children[0].value
            item.children[0].children = [{
                type: 'element',
                tagName: 'span',
                properties: {
                  class: 'toc-number'
                },
                children: [{
                  type: 'text',
                  value: item.index
                }]
              },
              {
                type: 'element',
                tagName: 'span',
                properties: {
                  class: 'toc-text'
                },
                children: [{
                  type: 'text',
                  value: value
                }]
              }
            ]
          }
        }


        if (item.children?.length > 0) {
          console.log(item, '父节点');
          deep(item.children, true, leave, idx)
        }
      }
    }
    deep(arr)
  }
  juhe(arr)
</script>

<style>
  ul,
  ol {
    border: 1px solid;
    padding: 0;
    list-style-type: none;
  }
</style>