---
import { getCollection } from 'astro:content'

import BaseLayout from '@layouts/BaseLayout.astro'
import ArticlePage from '@components/ArticlePage/Index.astro'
import Footer from '@components/Footer/Index.astro'
import { allPostList, pageProp } from '@stores/posts'

export async function getStaticPaths({ paginate }: { paginate: any }) {
  const allPosts = (await getCollection('posts')).sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  allPostList.set(allPosts)
  return paginate(allPosts, {
    pageSize: 10
  })
}
pageProp.set(Astro.props)
---

<BaseLayout>
  <ArticlePage />
  <Footer />
</BaseLayout>
